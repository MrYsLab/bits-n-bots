
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Mr. Y's Lab blog.">
      
      
        <meta name="author" content="Alan Yorinks">
      
      
        <link rel="canonical" href="https://mryslab.github.io/bits-n-bots/2025/05/22/telemetrix-under-the-hood--part-3/">
      
      
        <link rel="prev" href="../../21/telemetrix-under-the-hood-part-2/">
      
      
        <link rel="next" href="../../23/telemetrix-under-the-hood--part-4/">
      
      
      <link rel="icon" href="../../../../assets/images/logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Telemetrix Under The Hood Part 3 - Bits 'n Bots</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-72FWR7622V"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-72FWR7622V",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-72FWR7622V",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Telemetrix Under The Hood  Part 3 - Bits 'n Bots" >
      
        <meta  property="og:description"  content="Mr. Y's Lab blog." >
      
        <meta  property="og:image"  content="https://mryslab.github.io/bits-n-bots/assets/images/social/posts/Telemetrix_Under_The_Hood _Part_3.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://mryslab.github.io/bits-n-bots/2025/05/22/telemetrix-under-the-hood--part-3/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Telemetrix Under The Hood  Part 3 - Bits 'n Bots" >
      
        <meta  name="twitter:description"  content="Mr. Y's Lab blog." >
      
        <meta  name="twitter:image"  content="https://mryslab.github.io/bits-n-bots/assets/images/social/posts/Telemetrix_Under_The_Hood _Part_3.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#understanding-the-telemetrix-server" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="Bits &#39;n Bots" class="md-header__button md-logo" aria-label="Bits 'n Bots" data-md-component="logo">
      
  <img src="../../../../assets/images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Bits 'n Bots
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Telemetrix Under The Hood  Part 3
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Bits &#39;n Bots" class="md-nav__button md-logo" aria-label="Bits 'n Bots" data-md-component="logo">
      
  <img src="../../../../assets/images/logo.png" alt="logo">

    </a>
    Bits 'n Bots
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      <a href="../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Archive
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2025/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2025
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2023/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2023
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Categories
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Categories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/telemetrix-internals/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Telemetrix Internals
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/welcome/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Welcome
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-feature-reference-point" class="md-nav__link">
    <span class="md-ellipsis">
      A Feature Reference Point
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-an-established-arduino-library-for-device-support" class="md-nav__link">
    <span class="md-ellipsis">
      Using An Established Arduino Library For Device Support
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using An Established Arduino Library For Device Support">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sonar-sidebar" class="md-nav__link">
    <span class="md-ellipsis">
      SONAR SIDEBAR
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#telemetrix-server-file-layout" class="md-nav__link">
    <span class="md-ellipsis">
      Telemetrix Server File Layout
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#telemetrix-server-code-sections" class="md-nav__link">
    <span class="md-ellipsis">
      Telemetrix Server Code Sections
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Telemetrix Server Code Sections">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#feature-enabling-defines" class="md-nav__link">
    <span class="md-ellipsis">
      Feature Enabling Defines
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Feature Enabling Defines">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sonar-sidebar_1" class="md-nav__link">
    <span class="md-ellipsis">
      SONAR SIDEBAR
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arduino-id" class="md-nav__link">
    <span class="md-ellipsis">
      Arduino ID
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client-command-related-defines-and-support" class="md-nav__link">
    <span class="md-ellipsis">
      Client Command Related Defines and Support
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Client Command Related Defines and Support">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-command-table" class="md-nav__link">
    <span class="md-ellipsis">
      The Command Table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sonar-sidebar_2" class="md-nav__link">
    <span class="md-ellipsis">
      SONAR SIDEBAR
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#server-report-related-defines" class="md-nav__link">
    <span class="md-ellipsis">
      Server Report Related Defines
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#i2c-related-defines" class="md-nav__link">
    <span class="md-ellipsis">
      I2C Related Defines
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pin-related-defines-and-data-structures" class="md-nav__link">
    <span class="md-ellipsis">
      Pin Related Defines And Data Structures
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#feature-related-defines-data-structures-and-storage-allocation" class="md-nav__link">
    <span class="md-ellipsis">
      Feature Related Defines, Data Structures, And Storage Allocation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Feature Related Defines, Data Structures, And Storage Allocation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sonar-sidebar_3" class="md-nav__link">
    <span class="md-ellipsis">
      SONAR SIDEBAR
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#command-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Command Functions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scanning-inputs-generating-reports-and-running-steppers" class="md-nav__link">
    <span class="md-ellipsis">
      Scanning Inputs, Generating Reports, And Running Steppers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Scanning Inputs, Generating Reports, And Running Steppers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sonar-sidebar_4" class="md-nav__link">
    <span class="md-ellipsis">
      SONAR SIDEBAR
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setup-and-loop" class="md-nav__link">
    <span class="md-ellipsis">
      Setup and Loop
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Setup and Loop">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    <span class="md-ellipsis">
      Setup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loop" class="md-nav__link">
    <span class="md-ellipsis">
      Loop
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-next-posting" class="md-nav__link">
    <span class="md-ellipsis">
      The Next Posting
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content md-content--post" data-md-component="content">
    <div class="md-sidebar md-sidebar--post" data-md-component="sidebar" data-md-type="navigation">
      <div class="md-sidebar__scrollwrap">
        <div class="md-sidebar__inner md-post">
          <nav class="md-nav md-nav--primary">
            <div class="md-post__back">
              <div class="md-nav__title md-nav__container">
                <a href="../../../.." class="md-nav__link">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
                  <span class="md-ellipsis">
                    Back to index
                  </span>
                </a>
              </div>
            </div>
            
            <ul class="md-post__meta md-nav__list">
              <li class="md-nav__item md-nav__item--section">
                <div class="md-post__title">
                  <span class="md-ellipsis">
                    Metadata
                  </span>
                </div>
                <nav class="md-nav">
                  <ul class="md-nav__list">
                    <li class="md-nav__item">
                      <div class="md-nav__link">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5z"/></svg>
                        <time datetime="2025-05-22 00:00:00+00:00" class="md-ellipsis">May 22, 2025</time>
                      </div>
                    </li>
                    
                    
                      <li class="md-nav__item">
                        <div class="md-nav__link">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 3v15h3V3zm3 2 4 13 3-1-4-13zM5 5v13h3V5zM3 19v2h18v-2z"/></svg>
                          <span class="md-ellipsis">
                            in
                            
                              <a href="../../../../category/telemetrix-internals/">Telemetrix Internals</a></span>
                        </div>
                      </li>
                    
                    
                      
                      <li class="md-nav__item">
                        <div class="md-nav__link">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8m0-18a10 10 0 0 1 10 10 10 10 0 0 1-10 10C6.47 22 2 17.5 2 12A10 10 0 0 1 12 2m.5 5v5.25l4.5 2.67-.75 1.23L11 13V7z"/></svg>
                          <span class="md-ellipsis">
                            
                              14 min read
                            
                          </span>
                        </div>
                      </li>
                    
                  </ul>
                </nav>
              </li>
            </ul>
            
          </nav>
          
        </div>
      </div>
    </div>
    <article class="md-content__inner md-typeset">
      
        
  




<p><img alt="" src="../../../../assets/images/server.png" /></p>
<h1 id="understanding-the-telemetrix-server">Understanding The Telemetrix Server<a class="headerlink" href="#understanding-the-telemetrix-server" title="Permanent link">&para;</a></h1>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>Let's examine the 
<a href="https://github.com/MrYsLab/Telemetrix4UnoR4/blob/master/examples/Minima/Minima.ino">Telemetrix server code</a> 
for the Arduino UNO R4 Minima,</p>
<p>Why select the server for the Minima and not another board?</p>
<p>The Minima is one of the newer boards in the Arduino family, 
so we chose it to highlight a Telemetrix server design.
However, all Telemetrix servers are remarkably similar. 
The discussion below would be almost identical if any other server were chosen.
Once you learn about one Telemetrix server, you are fully prepared to understand them all.
This post will examine the file's structure, major data structures, and internal workings.</p>
<h3 id="a-feature-reference-point">A Feature Reference Point<a class="headerlink" href="#a-feature-reference-point" title="Permanent link">&para;</a></h3>
<p><img alt="" src="../../../../assets/images/HC-SR04.jpeg" /></p>
<p>One main reason for understanding the internal workings of a Telemetrix 
server is to be able to add support for a new sensor or actuator.</p>
<p>To this end, the HC-SR04 SONAR distance sensor illustrates the 
areas of server code affected by adding sensor support. Adding actuator support
is very similar to adding sensor support. </p>
<p>Why the HC-SR04? Because it highlights some of the finer points
of adding a new feature, such as:</p>
<ul>
<li>Device instantiation.</li>
<li>Continuous non-blocking timed polling of the device.</li>
<li>Generating reports for data changes.</li>
</ul>
<p>All these things will be uncovered as we proceed with the discussion.
Search for the heading <em><strong>SONAR SIDEBAR</strong></em> to make the HC-SR04-specific 
discussions easier to find within the post.</p>
<!-- more -->

<h3 id="using-an-established-arduino-library-for-device-support">Using An Established Arduino Library For Device Support<a class="headerlink" href="#using-an-established-arduino-library-for-device-support" title="Permanent link">&para;</a></h3>
<p>When adding support for a new device, you have the choice to create your own 
Arduino library or use an existing library. Using an 
existing support library has many advantages. 
You can evaluate the code to ensure it does not 
block for long periods and provides all the desired functionality.</p>
<h4 id="sonar-sidebar"><em>SONAR SIDEBAR</em><a class="headerlink" href="#sonar-sidebar" title="Permanent link">&para;</a></h4>
<p>The <a href="https://bitbucket.org/teckel12/arduino-new-ping/wiki/Home">NewPing</a> 
library was chosen to support the HC-SR04 SONAR feature. 
It is mostly non-blocking and has a straightforward API, 
making its integration into Telemetrix fairly simple.</p>
<p>Let's take a look at a basic example provided by NewPing.</p>
<pre><code class="language-aiignore">// ---------------------------------------------------------------------------
// Example NewPing library sketch that does a ping about 20 times per second.
// ---------------------------------------------------------------------------

#include &lt;NewPing.h&gt;

#define TRIGGER_PIN  12  // Arduino pin tied to trigger pin on the ultrasonic sensor.
#define ECHO_PIN     11  // Arduino pin tied to echo pin on the ultrasonic sensor.
#define MAX_DISTANCE 200 // Maximum distance we want to ping for (in centimeters). Maximum sensor distance is rated at 400-500cm.

NewPing sonar(TRIGGER_PIN, ECHO_PIN, MAX_DISTANCE); // NewPing setup of pins and maximum distance.

void setup() {
  Serial.begin(115200); // Open serial monitor at 115200 baud to see ping results.
}

void loop() {
  delay(50);                     // Wait 50ms between pings (about 20 pings/sec). 29ms should be the shortest delay between pings.
  Serial.print(&quot;Ping: &quot;);
  Serial.print(sonar.ping_cm()); // Send ping, get distance in cm and print result (0 = outside set distance range)
  Serial.println(&quot;cm&quot;);
}
</code></pre>
<p>Essentially, an instance of NewPing is created for each SONAR sensor. 
Then, a NewPing method, <strong><em>ping_cm()</em></strong>, reads the sensor.</p>
<p>For HC-SR04 sensors, a read may not be performed more than 
once every 29 milliseconds to get accurate reads. 
That is the reason for the 50-millisecond delay in the example above.</p>
<p>Telemetrix provides a non-blocking scheme to read the sensor continuously. 
This scheme will be covered in the
<a href="#scanning-inputs-generating-reports-and-running-steppers">Scanning Inputs</a>
section of this document.</p>
<h2 id="telemetrix-server-file-layout">Telemetrix Server File Layout<a class="headerlink" href="#telemetrix-server-file-layout" title="Permanent link">&para;</a></h2>
<p>All Telemetrix servers use a very similar file layout. 
We will use the server built for the 
<a href="https://github.com/MrYsLab/Telemetrix4UnoR4/blob/master/examples/Minima/Minima.ino">Arduino UNO R4 Minima</a>
for discussion purposes.</p>
<p>The server code is considered "fixed" because it is 
uploaded to the microcontroller and left unchanged. </p>
<p>To change the behavior of the Arduino or other microcontroller, the 
Telemetrix client sends messages to the server. 
The server is implemented to wait for and interpret
commands from the client and then act upon them.
A command may result in continuously monitoring 
a pin or device for data changes. When a data change is detected, 
the server may form a report message and autonomously send the report to the client.</p>
<p>We will cover the client in the next post.</p>
<p>Let's explore the code.</p>
<h2 id="telemetrix-server-code-sections">Telemetrix Server Code Sections<a class="headerlink" href="#telemetrix-server-code-sections" title="Permanent link">&para;</a></h2>
<p>All Telemetrix servers are <a href="https://github.com/MrYsLab/Telemetrix4UnoR4/blob/3629992d2c64da9b76eb5771d4c8933678149924/examples/Minima/Minima.ino#L19">implemented using the following "common" sections</a>:</p>
<ol>
<li><a href="#feature-enabling-defines">Feature Enabling Defines</a></li>
<li><a href="#arduino-id">Arduino ID</a></li>
<li><a href="#client-command-related-defines-and-support">Client Command Related Defines and Support</a></li>
<li><a href="#server-report-related-defines">Server Report Related Defines</a></li>
<li><a href="#i2c-related-defines">i2c Related Defines</a></li>
<li><a href="#pin-related-defines-and-data-structures">Pin-Related Defines And Data Structures</a></li>
<li><a href="#feature-related-defines-data-structures-and-storage-allocation">Feature Related Defines, Data Structures, and Storage Allocation</a></li>
<li><a href="#command-functions">Command Functions</a></li>
<li><a href="#scanning-inputs-generating-reports-and-running-steppers">Scanning Inputs, Generating Reports, and Running Steppers</a></li>
<li><a href="#setup-and-loop">Setup and Loop</a></li>
</ol>
<p><strong>Both code snippets and links to the code will be used 
when discussing these sections.</strong></p>
<h3 id="feature-enabling-defines">Feature Enabling Defines<a class="headerlink" href="#feature-enabling-defines" title="Permanent link">&para;</a></h3>
<p>The ability to turn a built-in feature on or off can be handy. 
For example, you may turn off certain features when debugging a modified server.</p>
<p>If the new feature causes the server to run out of programming memory space, 
you can control
the server's footprint by removing support for unneeded features.</p>
<p>A typical set of server features include:</p>
<ul>
<li>Support SPI device communication.</li>
<li>Support for i2c device communication.</li>
<li>Support for 1-Wire device communication.</li>
<li>Support for servo motors.</li>
<li>Support for stepper motors.</li>
<li>Support for HC-SR04 type ultrasonic distance sensors.</li>
<li>Support for DHT-type temperature/humidity sensors.</li>
</ul>
<p>Let's look at the <a href="https://github.com/MrYsLab/Telemetrix4UnoR4/blob/3629992d2c64da9b76eb5771d4c8933678149924/examples/Minima/Minima.ino#L35">feature-enabling #defines</a>.</p>
<pre><code class="language-aiignore">/* %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*/
/*                    FEATURE ENABLING DEFINES                      */
/* %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*/



// To disable a feature, comment out the desired enabling define or defines

// This will allow SPI support to be compiled into the sketch.
// Comment this out to save sketch space for the UNO
#define SPI_ENABLED 1

// This will allow OneWire support to be compiled into the sketch.
// Comment this out to save sketch space for the UNO
#define ONE_WIRE_ENABLED 1

// This will allow DHT support to be compiled into the sketch.
// Comment this out to save sketch space for the UNO
#define DHT_ENABLED 1

// This will allow sonar support to be compiled into the sketch.
// Comment this out to save sketch space for the UNO
#define SONAR_ENABLED 1

// This will allow servo support to be compiled into the sketch.
// Comment this out to save sketch space for the UNO
#define SERVO_ENABLED 1

// This will allow stepper support to be compiled into the sketch.
// Comment this out to save sketch space for the UNO

// Accelstepper is currently not compatible with the UNO R4 Minima
// #define STEPPERS_ENABLED 1

// This will allow I2C support to be compiled into the sketch.
// Comment this out to save sketch space for the UNO
#define I2C_ENABLED 1

</code></pre>
<p>All the features are enabled for the UNO R4 Minima except stepper
motor support. The #define for this feature is commented out because 
the AccelStepper library used to implement this feature does not 
yet function with Arduino UNO R4 boards.</p>
<p>We will implement the feature in a future article
using a different stepper motor library. </p>
<p>Note that when a feature is activated, the 
<a href="https://github.com/MrYsLab/Telemetrix4UnoR4/blob/3629992d2c64da9b76eb5771d4c8933678149924/examples
/Minima/Minima.ino#L74">required header files</a> are #included.</p>
<pre><code class="language-aiignore">#ifdef SERVO_ENABLED
#include &lt;Servo.h&gt;
#endif

#ifdef SONAR_ENABLED
#include &lt;NewPing.h&gt;
#endif

#ifdef I2C_ENABLED
#include &lt;Wire.h&gt;
#endif

#ifdef DHT_ENABLED
#include &lt;DHTStable.h&gt;
#endif

#ifdef SPI_ENABLED
#include &lt;SPI.h&gt;
#endif

#ifdef ONE_WIRE_ENABLED
#include &lt;OneWire.h&gt;
#endif

#ifdef STEPPERS_ENABLED
#include &lt;AccelStepper.h&gt;
#endif

</code></pre>
<h4 id="sonar-sidebar_1"><em>SONAR SIDEBAR</em><a class="headerlink" href="#sonar-sidebar_1" title="Permanent link">&para;</a></h4>
<p>For the <strong>HC-SR04</strong>, the feature is enabled with:</p>
<pre><code class="language-aiignore">// This will allow sonar support to be compiled into the sketch.
// Comment this out to save sketch space for the UNO
#define SONAR_ENABLED 1
</code></pre>
<p>With the <strong>SONAR</strong> feature enabled, the server includes the
<a href="https://bitbucket.org/teckel12/arduino-new-ping/wiki/Home">NewPing</a> Arduino library
for feature support.</p>
<pre><code class="language-aiignore">#ifdef SONAR_ENABLED
#include &lt;NewPing.h&gt;
#endif
</code></pre>
<p>When adding a new feature, you must add the new feature #define and use the #define to 
include any required support libraries.</p>
<h3 id="arduino-id">Arduino ID<a class="headerlink" href="#arduino-id" title="Permanent link">&para;</a></h3>
<p>For microcontrollers that use a serial/USB data transport, 
Telemetrix defaults to using an auto-discovery scheme to find the 
COM port to which the microcontroller is connected.</p>
<p>The Arduino ID aids in automatic microcontroller discovery and connection.</p>
<p>Optionally, you may also manually specify the COM port in your application. 
However, this is not always effective because the operating system's COM port 
assignment may change dynamically from run to run.</p>
<pre><code class="language-aiignore">/* %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*/
/*                    Arduino ID                      */
/* %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*/

// This value must be the same as specified when instantiating the
// telemetrix client. The client defaults to a value of 1.
// This value is used for the client to auto-discover and to
// connect to a specific board regardless of the current com port
// it is currently connected to.

#define ARDUINO_ID 1
</code></pre>
<h3 id="client-command-related-defines-and-support">Client Command Related Defines and Support<a class="headerlink" href="#client-command-related-defines-and-support" title="Permanent link">&para;</a></h3>
<p>The <a href="https://github.com/MrYsLab/Telemetrix4UnoR4/blob/3629992d2c64da9b76eb5771d4c8933678149924/examples/Minima/Minima.ino#L119">Arduino UNO R4 Minima</a>
has 58 client commands defined. 
Each command that the server supports has a command ID.</p>
<p>The command IDs must match those mirrored in the Python client API code.</p>
<pre><code class="language-aiignore">
/* %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*/
/*         Client Command Related Defines and Support               */
/* %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*/

// Commands Sent By The Client


// Add commands retaining the sequential numbering.
// The order of commands here must be maintained in the command_table.
#define SERIAL_LOOP_BACK 0
#define SET_PIN_MODE 1
#define DIGITAL_WRITE 2
#define ANALOG_WRITE 3
#define MODIFY_REPORTING 4 // mode(all, analog, or digital), pin, enable or disable
#define GET_FIRMWARE_VERSION 5
#define ARE_U_THERE 6
#define SERVO_ATTACH 7
#define SERVO_WRITE 8
#define SERVO_DETACH 9
#define I2C_BEGIN 10
#define I2C_READ 11
#define I2C_WRITE 12
#define SONAR_NEW 13
#define DHT_NEW 14
#define STOP_ALL_REPORTS 15
#define SET_ANALOG_SCANNING_INTERVAL 16
#define ENABLE_ALL_REPORTS 17
#define RESET 18
#define SPI_INIT 19
#define SPI_WRITE_BLOCKING 20
#define SPI_READ_BLOCKING 21
#define SPI_SET_FORMAT 22
#define SPI_CS_CONTROL 23
#define ONE_WIRE_INIT 24
#define ONE_WIRE_RESET 25
#define ONE_WIRE_SELECT 26
#define ONE_WIRE_SKIP 27
#define ONE_WIRE_WRITE 28
#define ONE_WIRE_READ 29
#define ONE_WIRE_RESET_SEARCH 30
#define ONE_WIRE_SEARCH 31
#define ONE_WIRE_CRC8 32
#define SET_PIN_MODE_STEPPER 33
#define STEPPER_MOVE_TO 34
#define STEPPER_MOVE 35
#define STEPPER_RUN 36
#define STEPPER_RUN_SPEED 37
#define STEPPER_SET_MAX_SPEED 38
#define STEPPER_SET_ACCELERATION 39
#define STEPPER_SET_SPEED 40
#define STEPPER_SET_CURRENT_POSITION 41
#define STEPPER_RUN_SPEED_TO_POSITION 42
#define STEPPER_STOP 43
#define STEPPER_DISABLE_OUTPUTS 44
#define STEPPER_ENABLE_OUTPUTS 45
#define STEPPER_SET_MINIMUM_PULSE_WIDTH 46
#define STEPPER_SET_ENABLE_PIN 47
#define STEPPER_SET_3_PINS_INVERTED 48
#define STEPPER_SET_4_PINS_INVERTED 49
#define STEPPER_IS_RUNNING 50
#define STEPPER_GET_CURRENT_POSITION 51
#define STEPPER_GET_DISTANCE_TO_GO 52
#define STEPPER_GET_TARGET_POSITION 53
#define GET_FEATURES 54
#define SONAR_SCAN_OFF 55
#define SONAR_SCAN_ON 56
#define BOARD_HARD_RESET 57
</code></pre>
<p>Each command ID has an associated command handler to process the command. 
Each command handler is initially specified using <a href="https://github.com/MrYsLab/Telemetrix4UnoR4/blob/3629992d2c64da9b76eb5771d4c8933678149924/examples/Minima/Minima.ino#L188">forward referencing</a>
to simplify compilation. </p>
<pre><code>/* Command Forward References*/

// If you add a new command, you must add the command handler
// here as well.

extern void serial_loopback();

extern void set_pin_mode();

extern void digital_write();

extern void analog_write();

extern void modify_reporting();

extern void get_firmware_version();

extern void are_you_there();

extern void servo_attach();

extern void servo_write();

extern void servo_detach();

extern void i2c_begin();

extern void i2c_read();

extern void i2c_write();

extern void sonar_new();

extern void dht_new();

extern void stop_all_reports();

extern void set_analog_scanning_interval();

extern void enable_all_reports();

extern void reset_data();

extern void init_pin_structures();

extern void init_spi();

extern void write_blocking_spi();

extern void read_blocking_spi();

extern void set_format_spi();

extern void spi_cs_control();

extern void onewire_init();

extern void onewire_reset();

extern void onewire_select();

extern void onewire_skip();

extern void onewire_write();

extern void onewire_read();

extern void onewire_reset_search();

extern void onewire_search();

extern void onewire_crc8();

extern void set_pin_mode_stepper();

extern void stepper_move_to();

extern void stepper_move();

extern void stepper_run();

extern void stepper_run_speed();

extern void stepper_set_max_speed();

extern void stepper_set_acceleration();

extern void stepper_set_speed();

extern void stepper_get_distance_to_go();

extern void stepper_get_target_position();

extern void stepper_get_current_position();

extern void stepper_set_current_position();

extern void stepper_run_speed_to_position();

extern void stepper_stop();

extern void stepper_disable_outputs();

extern void stepper_enable_outputs();

extern void stepper_set_minimum_pulse_width();

extern void stepper_set_3_pins_inverted();

extern void stepper_set_4_pins_inverted();

extern void stepper_set_enable_pin();

extern void stepper_is_running();

extern void get_features();

extern void sonar_disable();

extern void sonar_enable();

extern void board_hard_reset();
</code></pre>
<p>The actual handlers are defined further down the 
file. </p>
<p><strong><em>IMPORTANT NOTE:</em></strong></p>
<p><strong>The command IDs are used as an index to reference a command in the command 
table array. Therefore, when adding a
new command, add a new ID at the bottom of the command defines.</strong></p>
<p>The command IDs are mirrored in the Telemetrix client Python API.</p>
<h4 id="the-command-table">The Command Table<a class="headerlink" href="#the-command-table" title="Permanent link">&para;</a></h4>
<p>We must add each new command to the command table.</p>
<pre><code class="language-aiignore">// When adding a new command update the command_table.
// The command length is the number of bytes that follow
// the command byte itself, and does not include the command
// byte in its length.

// The command_func is a pointer the command's function.
struct command_descriptor
{
    // a pointer to the command processing function
    void (*command_func)(void);
};


// An array of pointers to the command functions.
// The list must be in the same order as the command defines.

command_descriptor command_table[] =
        {
                {&amp;serial_loopback},
                {&amp;set_pin_mode},
                {&amp;digital_write},
                {&amp;analog_write},
                {&amp;modify_reporting},
                {&amp;get_firmware_version},
                {&amp;are_you_there},
                {&amp;servo_attach},
                {&amp;servo_write},
                {&amp;servo_detach},
                {&amp;i2c_begin},
                {&amp;i2c_read},
                {&amp;i2c_write},
                {&amp;sonar_new},
                {&amp;dht_new},
                {&amp;stop_all_reports},
                {&amp;set_analog_scanning_interval},
                {&amp;enable_all_reports},
                {&amp;reset_data},
                {&amp;init_spi},
                {&amp;write_blocking_spi},
                {&amp;read_blocking_spi},
                {&amp;set_format_spi},
                {&amp;spi_cs_control},
                {&amp;onewire_init},
                {&amp;onewire_reset},
                {&amp;onewire_select},
                {&amp;onewire_skip},
                {&amp;onewire_write},
                {&amp;onewire_read},
                {&amp;onewire_reset_search},
                {&amp;onewire_search},
                {&amp;onewire_crc8},
                {&amp;set_pin_mode_stepper},
                {&amp;stepper_move_to},
                {&amp;stepper_move},
                {&amp;stepper_run},
                {&amp;stepper_run_speed},
                {&amp;stepper_set_max_speed},
                {&amp;stepper_set_acceleration},
                {&amp;stepper_set_speed},
                (&amp;stepper_set_current_position),
                (&amp;stepper_run_speed_to_position),
                (&amp;stepper_stop),
                (&amp;stepper_disable_outputs),
                (&amp;stepper_enable_outputs),
                (&amp;stepper_set_minimum_pulse_width),
                (&amp;stepper_set_enable_pin),
                (&amp;stepper_set_3_pins_inverted),
                (&amp;stepper_set_4_pins_inverted),
                (&amp;stepper_is_running),
                (&amp;stepper_get_current_position),
                {&amp;stepper_get_distance_to_go},
                (&amp;stepper_get_target_position),
                (&amp;get_features),
                (&amp;sonar_disable),
                (&amp;sonar_enable),
                (&amp;board_hard_reset),
        };


</code></pre>
<h4 id="sonar-sidebar_2"><em>SONAR SIDEBAR</em><a class="headerlink" href="#sonar-sidebar_2" title="Permanent link">&para;</a></h4>
<p>Three methods support the SONAR feature: <strong><em>sonar_new</em></strong>, <strong><em>sonar_disable</em></strong>, and <strong><em>sonar_enable</em></strong>.
The <a href="#command-functions">Command Functions</a> section of this post will discuss these.</p>
<h3 id="server-report-related-defines">Server Report Related Defines<a class="headerlink" href="#server-report-related-defines" title="Permanent link">&para;</a></h3>
<p>A <em>server report</em> transmits information, such as an input value change or a reply 
to a client informational request.</p>
<p>Each report contains a report ID. These IDs are defined
<a href="https://github.com/MrYsLab/Telemetrix4UnoR4/blob/3629992d2c64da9b76eb5771d4c8933678149924/examples/Minima/Minima.ino#L398">here</a>.</p>
<p>When adding an ID for a new report, add it before DEBUG_PRINT_REPORT. </p>
<pre><code class="language-aiignore">// Reports sent to the client

#define DIGITAL_REPORT DIGITAL_WRITE
#define ANALOG_REPORT ANALOG_WRITE
#define FIRMWARE_REPORT 5
#define I_AM_HERE 6
#define SERVO_UNAVAILABLE 7
#define I2C_TOO_FEW_BYTES_RCVD 8
#define I2C_TOO_MANY_BYTES_RCVD 9
#define I2C_READ_REPORT 10
#define SONAR_DISTANCE 11
#define DHT_REPORT 12
#define SPI_REPORT 13
#define ONE_WIRE_REPORT 14
#define STEPPER_DISTANCE_TO_GO 15
#define STEPPER_TARGET_POSITION 16
#define STEPPER_CURRENT_POSITION 17
#define STEPPER_RUNNING_REPORT 18
#define STEPPER_RUN_COMPLETE_REPORT 19
#define FEATURES 20
#define DEBUG_PRINT 99
</code></pre>
<p>For example, if we want to create a new report called NEW_REPORT, we would
add it after the FEATURES report, and NEW_REPORT would be assigned an ID of 21.</p>
<pre><code class="language-aiignore">#define STEPPER_RUNNING_REPORT 18
#define STEPPER_RUN_COMPLETE_REPORT 19
#define FEATURES 20
#define NEW_REPORT 21  // The newly added report
#define DEBUG_PRINT 99
</code></pre>
<p>Like command IDs, report IDs are mirrored in the Telemetrix Python API.</p>
<h3 id="i2c-related-defines">I2C Related Defines<a class="headerlink" href="#i2c-related-defines" title="Permanent link">&para;</a></h3>
<p>This <a href="https://github.com/MrYsLab/Telemetrix4UnoR4/blob/3629992d2c64da9b76eb5771d4c8933678149924/examples/Minima/Minima.ino#L485">section</a> 
contains #defines used for managing i2c ports. It specifies 
the i2c SDA and SCL pins.</p>
<p>Note that the Arduino UNO R4 Minima has only one I2C port. Its one 
I2C bus is marked with SCL and SDA. It is shared with A4 (SDA) 
and A5 (SCL), which owners of previous UNOs are familiar with.</p>
<p>The #defines for a second I2C port are included for possible future development, but 
are not supported by the current version of the Arduino UNO R4 Minima.</p>
<pre><code class="language-aiignore">/* %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*/
/*                     i2c Related Defines*/
/* %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*/

/**********************************/
/* i2c defines */

#ifdef I2C_ENABLED
// uncomment out the next line to create a 2nd i2c port
// #define SECOND_I2C_PORT

#ifdef SECOND_I2C_PORT
// Change the pins to match SDA and SCL for your board
#define SECOND_I2C_PORT_SDA PB3
#define SECOND_I2C_PORT_SCL PB10

TwoWire Wire2(SECOND_I2C_PORT_SDA, SECOND_I2C_PORT_SCL);
#endif

// a pointer to an active TwoWire object
TwoWire *current_i2c_port;
#endif
</code></pre>
<h3 id="pin-related-defines-and-data-structures">Pin Related Defines And Data Structures<a class="headerlink" href="#pin-related-defines-and-data-structures" title="Permanent link">&para;</a></h3>
<p>This <a href="https://github.com/MrYsLab/Telemetrix4UnoR4/blob/3629992d2c64da9b76eb5771d4c8933678149924/examples/Minima/Minima.ino#L509">section</a>
contains the definitions for arrays of pin descriptors for analog and 
digital pins.</p>
<p>Each pin descriptor contains information such as the pin number, if its mode is
input or output, whether the pin is enabled to generate a report, and the last
value reported.</p>
<pre><code class="language-aiignore">/* %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*/
/*           Pin Related Defines And Data Structures                */
/* %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*/


// Pin mode definitions

// INPUT defined in Arduino.h = 0
// OUTPUT defined in Arduino.h = 1
// INPUT_PULLUP defined in Arduino.h = 2
// The following are defined for arduino_telemetrix (AT)
#define AT_ANALOG 3
#define AT_MODE_NOT_SET 255

// maximum number of pins supported
#define MAX_DIGITAL_PINS_SUPPORTED 14
#define MAX_ANALOG_PINS_SUPPORTED 6


// Analog input pins are defined from
// A0 - A5.


// To translate a pin number from an integer value to its analog pin number
// equivalent, this array is used to look up the value to use for the pin.
int analog_read_pins[6] = {A0, A1, A2, A3, A4, A5};

// a descriptor for digital pins
struct pin_descriptor
{
    byte pin_number;
    byte pin_mode;
    bool reporting_enabled; // If true, then send reports if an input pin
    int last_value;         // Last value read for input mode
};

// an array of digital_pin_descriptors
pin_descriptor the_digital_pins[MAX_DIGITAL_PINS_SUPPORTED];

// a descriptor for analog pins
struct analog_pin_descriptor
{
    byte pin_number;
    byte pin_mode;
    bool reporting_enabled; // If true, then send reports if an input pin
    int last_value;         // Last value read for input mode
    int differential;       // difference between current and last value needed
                            // to generate a report
};

// an array of analog_pin_descriptors
analog_pin_descriptor the_analog_pins[MAX_ANALOG_PINS_SUPPORTED];

unsigned long current_millis;  // for analog input loop
unsigned long previous_millis; // for analog input loop
uint8_t analog_sampling_interval = 19; // in milliseconds

</code></pre>
<h3 id="feature-related-defines-data-structures-and-storage-allocation">Feature Related Defines, Data Structures, And Storage Allocation<a class="headerlink" href="#feature-related-defines-data-structures-and-storage-allocation" title="Permanent link">&para;</a></h3>
<p>This <a href="https://github.com/MrYsLab/Telemetrix4UnoR4/blob/3629992d2c64da9b76eb5771d4c8933678149924/examples/Minima/Minima.ino#L567">section</a> contains the code to manage features such as 
servos, DHT temperature/humidity devices, sonar distance sensors, 
stepper motors, and onewire devices.</p>
<pre><code class="language-aiignore">/* %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*/
/*  Feature Related Defines, Data Structures and Storage Allocation */
/* %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*/

// servo management
#ifdef SERVO_ENABLED
Servo servos[MAX_SERVOS];

// this array allows us to retrieve the servo object
// associated with a specific pin number
byte pin_to_servo_index_map[MAX_SERVOS];
#endif

// HC-SR04 Sonar Management
#define MAX_SONARS 6

#ifdef SONAR_ENABLED
struct Sonar
{
    uint8_t trigger_pin;
    unsigned int last_value;
    NewPing *usonic;
};

// an array of sonar objects
Sonar sonars[MAX_SONARS];

byte sonars_index = 0; // index into sonars struct

// used for scanning the sonar devices.
byte last_sonar_visited = 0;
#endif //SONAR_ENABLED

unsigned long sonar_current_millis;  // for analog input loop
unsigned long sonar_previous_millis; // for analog input loop

#ifdef SONAR_ENABLED
uint8_t sonar_scan_interval = 33;    // Milliseconds between sensor pings
// (29ms is about the min to avoid = 19;
#endif

// DHT Management
#define MAX_DHTS 6                // max number of devices
#define READ_FAILED_IN_SCANNER 0  // read request failed when scanning
#define READ_IN_FAILED_IN_SETUP 1 // read request failed when initially setting up

#ifdef DHT_ENABLED
struct DHT
{
    uint8_t pin;
    uint8_t dht_type;
    unsigned int last_value;
    DHTStable *dht_sensor;
};

// an array of dht objects
DHT dhts[MAX_DHTS];

byte dht_index = 0; // index into dht struct

unsigned long dht_current_millis;      // for analog input loop
unsigned long dht_previous_millis;     // for analog input loop
unsigned int dht_scan_interval = 2000; // scan dht's every 2 seconds
#endif // DHT_ENABLED


/* OneWire Object*/

// a pointer to a OneWire object
#ifdef ONE_WIRE_ENABLED
OneWire *ow = NULL;
#endif

#define MAX_NUMBER_OF_STEPPERS 4

// stepper motor data
#ifdef STEPPERS_ENABLED
AccelStepper *steppers[MAX_NUMBER_OF_STEPPERS];

// stepper run modes
uint8_t stepper_run_modes[MAX_NUMBER_OF_STEPPERS];
#endif

### 
</code></pre>
<h4 id="sonar-sidebar_3"><em>SONAR SIDEBAR</em><a class="headerlink" href="#sonar-sidebar_3" title="Permanent link">&para;</a></h4>
<p>Specific to HC-SR04 management is this section:</p>
<pre><code class="language-aiignore">// HC-SR04 Sonar Management
#define MAX_SONARS 6

#ifdef SONAR_ENABLED
struct Sonar
{
    uint8_t trigger_pin;
    unsigned int last_value;
    NewPing *usonic;
};

// an array of sonar objects
Sonar sonars[MAX_SONARS];

byte sonars_index = 0; // index into sonars struct

// used for scanning the sonar devices.
byte last_sonar_visited = 0;
#endif //SONAR_ENABLED

#ifdef SONAR_ENABLED
uint8_t sonar_scan_interval = 33;    // Milliseconds between sensor pings
// (29ms is about the min to avoid = 19;
#endif
</code></pre>
<p>The server supports up to 6 sensors. Each sensor has an entry 
into an array that stores its trigger pin, the last value read, 
and a pointer to its associated NewPing instance.</p>
<p>The scan interval is set to 33 milliseconds for accurate distance measurement.</p>
<h3 id="command-functions">Command Functions<a class="headerlink" href="#command-functions" title="Permanent link">&para;</a></h3>
<p>This <a href="https://github.com/MrYsLab/Telemetrix4UnoR4/blob/3629992d2c64da9b76eb5771d4c8933678149924/examples/Minima/Minima.ino#L651">section of code</a> 
contains the implementations of the command handlers.</p>
<p>Each handler dereferences the data specific to each command.</p>
<p>Let's look at the handler for a digital write.</p>
<pre><code class="language-aiignore">void digital_write()
{
    byte pin;
    byte value;
    pin = command_buffer[0];
    value = command_buffer[1];
    digitalWrite(pin, value);
}
</code></pre>
<p>The command buffer contains the information sent from the client, including the pin 
number and the requested value for that pin.</p>
<p>The Arduino Core digital write command, digitalWrite,  is called using the
information sent from the client.</p>
<h3 id="scanning-inputs-generating-reports-and-running-steppers">Scanning Inputs, Generating Reports, And Running Steppers<a class="headerlink" href="#scanning-inputs-generating-reports-and-running-steppers" title="Permanent link">&para;</a></h3>
<p>After setting a pin as input, Telemetrix polls the pin for any changes. It does so for
<a href="https://github.com/MrYsLab/Telemetrix4UnoR4/blob/3629992d2c64da9b76eb5771d4c8933678149924/examples/Minima/Minima.ino#L1751">digital inputs</a>, 
<a href="https://github.com/MrYsLab/Telemetrix4UnoR4/blob/3629992d2c64da9b76eb5771d4c8933678149924/examples/Minima/Minima.ino#L1785">analog inputs</a>,
<a href="https://github.com/MrYsLab/Telemetrix4UnoR4/blob/3629992d2c64da9b76eb5771d4c8933678149924/examples/Minima/Minima.ino#L1836">HC-SR04 distance sensors</a>,
and <a href="https://github.com/MrYsLab/Telemetrix4UnoR4/blob/3629992d2c64da9b76eb5771d4c8933678149924/examples/Minima/Minima.ino#L1873">DHT temperature sensors</a>,
and if required, 
will keep a stepper motor running.</p>
<h4 id="sonar-sidebar_4"><em>SONAR SIDEBAR</em><a class="headerlink" href="#sonar-sidebar_4" title="Permanent link">&para;</a></h4>
<p>Let's look at the code for the <em>sonar</em> scanner.</p>
<pre><code class="language-aiignore">void scan_sonars()
{
#ifdef SONAR_ENABLED
    unsigned int distance;

    if (sonars_index)
    {
        sonar_current_millis = millis();
        if (sonar_current_millis - sonar_previous_millis &gt; sonar_scan_interval)
        {
            sonar_previous_millis = sonar_current_millis;
            distance = sonars[last_sonar_visited].usonic-&gt;ping_cm();
            if (distance != sonars[last_sonar_visited].last_value)
            {
                sonars[last_sonar_visited].last_value = distance;

                // byte 0 = packet length
                // byte 1 = report type
                // byte 2 = trigger pin number
                // byte 3 = distance high order byte
                // byte 4 = distance low order byte
                byte report_message[5] = {4, SONAR_DISTANCE, sonars[last_sonar_visited].trigger_pin,
                                          (byte)(distance &gt;&gt; 8), (byte)(distance &amp; 0xff)
                };
                Serial.write(report_message, 5);
            }
            last_sonar_visited++;
            if (last_sonar_visited == sonars_index)
            {
                last_sonar_visited = 0;
            }
        }
    }
#endif
}
</code></pre>
<p>The <em>scan_sonars</em> function first checks to see if any sensors were enabled by checking 
the <em>sonars_index</em> variable.</p>
<p>Next, it determines whether the scanning interval has elapsed and updates the 
sonar_previous_millis variable to the current time.</p>
<p>It then calls the <em>ping_cm</em> function of the <em>usonic</em> instance associated with the 
sensor to retrieve the distance.</p>
<p>If the current distance read differs from the last distance read, it updates 
the <em>last_value</em> variable to the current distance read, assembles, and sends a 
report message to the client.</p>
<p>Finally, it updates the sonars_index to the next sensor to be scanned.</p>
<h3 id="setup-and-loop">Setup and Loop<a class="headerlink" href="#setup-and-loop" title="Permanent link">&para;</a></h3>
<pre><code class="language-aiignore">/* %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*/
/*                    Setup And Loop                                */
/* %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*/

void setup()
{
    // set up features for enabled features
#ifdef ONE_WIRE_ENABLED
    features |= ONEWIRE_FEATURE;
#endif

#ifdef DHT_ENABLED
    features |= DHT_FEATURE;
#endif

#ifdef STEPPERS_ENABLED
    features |= STEPPERS_FEATURE;
#endif

#ifdef SPI_ENABLED
    features |= SPI_FEATURE;
#endif

#ifdef SERVO_ENABLED
    features |= SERVO_FEATURE;
#endif

#ifdef SONAR_ENABLED
    features |= SONAR_FEATURE;
#endif

#ifdef I2C_ENABLED
    features |= I2C_FEATURE;
#endif

#ifdef STEPPERS_ENABLED

    for ( int i = 0; i &lt; MAX_NUMBER_OF_STEPPERS; i++) {
        stepper_run_modes[i] = STEPPER_STOP ;
    }
#endif

    init_pin_structures();

    Serial.begin(115200);

    pinMode(13, OUTPUT);
    for( int i = 0; i &lt; 4; i++){
        digitalWrite(13, HIGH);
        delay(250);
        digitalWrite(13, LOW);
        delay(250);
    }
}

void loop()
{
    // keep processing incoming commands
    get_next_command();

    if (!stop_reports)
    { // stop reporting
        scan_digital_inputs();
        scan_analog_inputs();

#ifdef SONAR_ENABLED
        if(sonar_reporting_enabled ){
            scan_sonars();
        }
#endif

#ifdef DHT_ENABLED
        scan_dhts();
#endif
#ifdef STEPPERS_ENABLED
        run_steppers();
#endif
    }
}
</code></pre>
<h4 id="setup">Setup<a class="headerlink" href="#setup" title="Permanent link">&para;</a></h4>
<p>The <a href="https://github.com/MrYsLab/Telemetrix4UnoR4/blob/3629992d2c64da9b76eb5771d4c8933678149924/examples/Minima/Minima.ino#L2012">setup function</a> checks for all enabled features and stores then stores
the information in the <a href="https://github.com/MrYsLab/Telemetrix4UnoR4/blob/3629992d2c64da9b76eb5771d4c8933678149924/examples/Minima/Minima.ino#L481"><em>features</em> byte</a>.</p>
<p>It builds the <a href="https://github.com/MrYsLab/Telemetrix4UnoR4/blob/3629992d2c64da9b76eb5771d4c8933678149924/examples/Minima/Minima.ino#L1724">pin structures</a>,
starts the serial link, and then flashes the board LED 4 times.</p>
<h4 id="loop">Loop<a class="headerlink" href="#loop" title="Permanent link">&para;</a></h4>
<p>The <a href="https://github.com/MrYsLab/Telemetrix4UnoR4/blob/3629992d2c64da9b76eb5771d4c8933678149924/examples/Minima/Minima.ino#L2063">loop function</a> checks to see if a client command needs to be processed
by calling <a href="https://github.com/MrYsLab/Telemetrix4UnoR4/blob/3629992d2c64da9b76eb5771d4c8933678149924/examples/Minima/Minima.ino#L1631">get_next_command</a>.</p>
<p>If reporting is enabled, it calls the various scanners and, if necessary, sends the requested commands 
to the configured stepper motors.</p>
<h2 id="the-next-posting">The Next Posting<a class="headerlink" href="#the-next-posting" title="Permanent link">&para;</a></h2>
<p>We've completed the discussion of the Telemetrix server file. 
In the next post, we will discuss the Python API class.</p>







  
  



  


  



  <h2 id="__comments">Comments</h2>
  <!-- Insert generated snippet here -->
<script src="https://giscus.app/client.js"
        data-repo="MrYsLab/bits-n-bots"
        data-repo-id="R_kgDOK6KUpA"
        data-category="General"
        data-category-id="DIC_kwDOK6KUpM4Cbw4k"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>
  <!-- Synchronize Giscus theme with palette -->
  <script>
    var giscus = document.querySelector("script[src*=giscus]")

    // Set palette on initial load
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate"
        ? "transparent_dark"
        : "light"

      // Instruct Giscus to set theme
      giscus.setAttribute("data-theme", theme)
    }

    // Register event handlers after documented loaded
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate"
            ? "transparent_dark"
            : "light"

          // Instruct Giscus to change theme
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script>

      
    </article>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023-2025 Alan Yorinks

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="mailto:MisterYsLab@gmail.com" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4l217.6 163.2c11.4 8.5 27 8.5 38.4 0l217.6-163.2c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48zM0 176v208c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V176L294.4 339.2a63.9 63.9 0 0 1-76.8 0z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/MrYsLab" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://bsky.app/profile/mryslab.bsky.social" target="_blank" rel="noopener" title="bsky.app" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M111.8 62.2C170.2 105.9 233 194.7 256 242.4c23-47.6 85.8-136.4 144.2-180.2 42.1-31.6 110.3-56 110.3 21.8 0 15.5-8.9 130.5-14.1 149.2-18.2 64.8-84.4 81.4-143.3 71.3C456 322 482.2 380 425.6 438c-107.4 110.2-154.3-27.6-166.3-62.9-1.7-4.9-2.6-7.8-3.3-7.8s-1.6 3-3.3 7.8c-12 35.3-59 173.1-166.3 62.9-56.5-58-30.4-116 72.5-133.5C100 314.6 33.8 298 15.7 233.1 10.4 214.4 1.5 99.4 1.5 83.9c0-77.8 68.2-53.4 110.3-21.8z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../../..", "features": [], "search": "../../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
        <script src="../../../../js/open_in_new_tab.js"></script>
      
    
  </body>
</html>